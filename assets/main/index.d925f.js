window.__require=function t(e,o,i){function n(s,c){if(!o[s]){if(!e[s]){var a=s.split("/");if(a=a[a.length-1],!e[a]){var p="function"==typeof __require&&__require;if(!c&&p)return p(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var u=o[s]={exports:{}};e[s][0].call(u.exports,function(t){return n(e[s][1][t]||t)},u,u.exports,t,e,o,i)}return o[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<i.length;s++)n(i[s]);return n}({BackgroundScroller:[function(t,e,o){"use strict";cc._RF.push(e,"47c84Igjq5FeLgjaf+41Igh","BackgroundScroller");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.background1=void 0,e.background2=void 0,e.ground1=void 0,e.ground2=void 0,e.scrollSpeed=0,e}return n(e,t),e.prototype.start=function(){this.background1.node.x=0,this.ground1.node.x=0,this.background2.node.x=this.background1.node.width,this.ground2.node.x=this.ground1.node.width},e.prototype.update=function(t){this._scrollBackground(t),this._resetIfOutOfScreen()},e.prototype._scrollBackground=function(t){this.background1.node.x-=this.scrollSpeed*t,this.background2.node.x-=this.scrollSpeed*t,this.ground1.node.x-=this.scrollSpeed*t,this.ground2.node.x-=this.scrollSpeed*t},e.prototype._resetIfOutOfScreen=function(){this.background1.node.x<=-this.background1.node.width&&(this.background1.node.x+=2*this.background1.node.width),this.background2.node.x<=-this.background2.node.width&&(this.background2.node.x+=2*this.background2.node.width),this.ground1.node.x<=-this.ground1.node.width&&(this.ground1.node.x+=2*this.ground1.node.width),this.ground2.node.x<=-this.ground2.node.width&&(this.ground2.node.x+=2*this.ground2.node.width)},r([a(cc.Sprite)],e.prototype,"background1",void 0),r([a(cc.Sprite)],e.prototype,"background2",void 0),r([a(cc.Sprite)],e.prototype,"ground1",void 0),r([a(cc.Sprite)],e.prototype,"ground2",void 0),r([a],e.prototype,"scrollSpeed",void 0),r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],BatFlyAnim:[function(t,e,o){"use strict";cc._RF.push(e,"a10e9ArlfFOKocmcodP1l6T","BatFlyAnim");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator.ccclass,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._batFX=void 0,e}return n(e,t),e.prototype.init=function(t){this._batFX=t},e.prototype.hideFX=function(){this._batFX.despawn()},r([s],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],BatFlyFX:[function(t,e,o){"use strict";cc._RF.push(e,"40209DjFmNMqZ9kDhuPScP6","BatFlyFX");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./BatFlyAnim"),c=cc._decorator,a=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.batAnim=void 0,e._game=void 0,e}return n(e,t),e.prototype.onLoad=function(){this.batAnim.getAnimationState("bat_fly").wrapMode=cc.WrapMode.Loop,this.batAnim.getComponent(s.default).init(this)},e.prototype.init=function(t){this._game=t},e.prototype.play=function(){this.batAnim.play("bat_fly")},e.prototype.despawn=function(){this._game.reuseBatFX(this.node)},e.prototype.unuse=function(){this.node.active=!1,this.batAnim.stop("bat_fly")},e.prototype.reuse=function(){this.node.active=!0,this.batAnim.play("bat_fly")},r([p(cc.Animation)],e.prototype,"batAnim",void 0),r([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./BatFlyAnim":"BatFlyAnim"}],Brick:[function(t,e,o){"use strict";cc._RF.push(e,"409e0fqk1BOY7XoC5s5oAtu","Brick");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.unuse=function(){this.node.active=!1},e.prototype.reuse=function(){this.node.active=!0},r([c],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],GameConstants:[function(t,e,o){"use strict";cc._RF.push(e,"ef812kSJIlEcbB25Xs7Xt/+","GameConstants"),Object.defineProperty(o,"__esModule",{value:!0}),o.LOADING_TIME=o.LECTURE_FINISH=o.LECTURE_START=o.DIALOGUES=o.OPEN_DIALOG_USERNAME_INPUT=o.LECTURE_STAGE=o.MAZE_MAX_TIME=o.MAZE_MOVE_TIME=o.MAZE_GAME_GOAL=o.BRICK_WIDTH=o.BRICK_HEIGHT=o.MAZE_MOVE_STEP=o.MAZE_N=o.MAZE_M=o.TILE_TYPE=o.STAR_CATCHER_GAME_GOAL=o.GAME_TYPE=void 0,function(t){t[t.NORMAL=0]="NORMAL",t[t.TOUR=1]="TOUR"}(o.GAME_TYPE||(o.GAME_TYPE={})),o.STAR_CATCHER_GAME_GOAL=3,function(t){t[t.TILE_ROAD=0]="TILE_ROAD",t[t.TILE_WALL=1]="TILE_WALL",t[t.TILE_STAR=2]="TILE_STAR"}(o.TILE_TYPE||(o.TILE_TYPE={})),o.MAZE_GAME_GOAL=1,o.MAZE_MAX_TIME=20,o.BRICK_WIDTH=30,o.BRICK_HEIGHT=30,o.MAZE_N=19,o.MAZE_M=19,o.MAZE_MOVE_STEP=30,o.MAZE_MOVE_TIME=20,function(t){t[t.OPEN=0]="OPEN",t[t.AFTER_STAR=1]="AFTER_STAR",t[t.AFTER_MAZE=2]="AFTER_MAZE"}(o.LECTURE_STAGE||(o.LECTURE_STAGE={})),o.OPEN_DIALOG_USERNAME_INPUT=3;var i=["Prof. Oak: ...","Prof. Oak: Welcome to the Growild Universe! I have been waiting for you!","Prof. Oak: I am Prof. Oak, a world class Pokemon Master, and I will guide you through this game.","Prof. Oak: Let's start with your name, shall we?","Prof. Oak: Oh, {}! What a wonderful name! I have a strong feeling that you will be the next Pokemon Master.","Prof. Oak: Now! Let's get back to the game...",'Prof. Oak: In our game, all the pokemons need "Stars" to evolve, breed, and live, but it is not easy to catch the stars.',"Prof. Oak: Thus, your only goal is to control my favoriate Pokemon, Grimer, to collect as many stars as possible!","Prof. Oak: Now let's get started, your first quest will be in the Dark Forest!","Prof. Oak: You will need 3 stars to win this quest!","Prof. Oak: I know it sounds hard, but I am sure you and your monster can  do it!","Prof. Oak: Wish you enjoy it. See you later. :)","Prof. Oak: ...","Prof. Oak: Well Done, {}! Look at all these beautiful stars! That's totally enough for my research! ","Prof. Oak: But if you want to keep challenging yourself, there are some more precious stars were lost in the Endless Maze","Prof. Oak: That's even more challenging than catching stars in the forest, as you will need to guide your Grimer to search in complex mazes.","Prof. Oak: More importantly, because of the harsh environment in the maze, you only have 20 seconds to search in each maze.","Prof. Oak: I know it sounds hard, but I am sure you and your Grimer can do it!","Prof. Oak: Wish you enjoy it. See you later. :)","Prof. Oak: ...","Prof. Oak: Well Done, {}! You finished your tutorial, and you have done an AMAZING JOB!","Prof. Oak: You can now explore this game all by yourself.","Prof. Oak: You are always welcomed to visit me again, just play another TOUR.","Prof. Oak: I am very proud of you, see you later. :)"];o.DIALOGUES=i,o.LECTURE_START=[0,12,19];var n=[11,18,i.length-1];o.LECTURE_FINISH=n,o.LOADING_TIME=1500,cc._RF.pop()},{}],Game:[function(t,e,o){"use strict";cc._RF.push(e,"82e2bxuLbhJBZaZiVZThpLI","Game");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../constant/GameConstants"),c=t("../lectures/OpenLecture"),a=t("./Player"),p=cc._decorator,u=p.ccclass,h=p.property,l=t("./ScoreFX"),_=t("./Star"),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ground=void 0,e.starPref=void 0,e.scorePref=void 0,e.player=void 0,e.scoreDisplay=void 0,e.maxDuration=0,e.minDuration=0,e.scoreAudio=void 0,e.startBtn=void 0,e.completeBtn=void 0,e.pauseBtn=void 0,e.quitBtn=void 0,e.gameOverLabel=void 0,e.usernameLabel=void 0,e.highestScoreLabel=void 0,e.instructionLabel=void 0,e.nextLevelDisplay=void 0,e.starTimer=void 0,e.recordDisplay=void 0,e.pbCompare=void 0,e._score=0,e._timer=0,e._starDuration=0,e._currentStar=void 0,e._isPlaying=!1,e._starPool=void 0,e._scorePool=void 0,e._username="",e._highestScore=0,e._ranking=void 0,e._gameType=s.GAME_TYPE.TOUR,e}return n(e,t),e.prototype.onLoad=function(){this.gameOverLabel.node.active=!1,this._starPool=new cc.NodePool("Star"),this._scorePool=new cc.NodePool("ScoreFX"),cc.sys.localStorage.getItem("currentPlayer")?this._username=cc.sys.localStorage.getItem("currentPlayer"):this._username="player12138",this.usernameLabel.string="Player: "+this._username},e.prototype._getLeaderBoard=function(){cc.sys.localStorage.getItem("ranking-star")?this._ranking=JSON.parse(cc.sys.localStorage.getItem("ranking-star")):(this._ranking={},cc.sys.localStorage.setItem("ranking-star",JSON.stringify(this._ranking)))},e.prototype._getHighestScore=function(){this._username in this._ranking&&(this._highestScore=this._ranking[this._username],this.highestScoreLabel.string="Highest Score: "+this._highestScore)},e.prototype.start=function(){this._gameType===s.GAME_TYPE.TOUR?this.highestScoreLabel.node.active=!1:(this._getLeaderBoard(),this._getHighestScore())},e.prototype.setGameType=function(t){this._gameType=t},e.prototype.startPlaying=function(){this.pauseBtn.node.active=!0,this._isPlaying=!0,this.startBtn.node.setPosition(cc.v2(-1e3,-1e3)),this.player.init(),this.spawnNewStar(),this.gameOverLabel.node.active=!1},e.prototype.quitPlaying=function(){this._settleScore(),cc.director.loadScene("main")},e.prototype._getNewStarPosition=function(){var t,e=this.ground.y+this.ground.height/2+Math.random()*this.player.jumpHeight+50;return t=2*(Math.random()-.5)*(this.node.width/2),cc.v2(t,e)},e.prototype._spawnScoreFX=function(t){var e=void 0;return this._scorePool.size()>0?(e=this._scorePool.get()).getComponent(l.default).init(this):e=cc.instantiate(this.scorePref),e.setPosition(t),e.getComponent(l.default)},e.prototype.desapwnScoreFX=function(t){this._scorePool.put(t)},e.prototype.spawnNewStar=function(){var t=void 0;(t=this._starPool.size()>0?this._starPool.get():cc.instantiate(this.starPref)).getComponent(_.default).init(this),this._starDuration=this.minDuration+Math.random()*(this.maxDuration-this.minDuration),t.setPosition(this._getNewStarPosition()),this.node.addChild(t),this._currentStar=t.getComponent(_.default)},e.prototype.despawnStar=function(t){this._starPool.put(t)},e.prototype.getStarProgress=function(){return this._timer/this._starDuration},e.prototype.gainScore=function(t){this._score+=1,this._score>this._highestScore&&(this._highestScore=this._score,this.highestScoreLabel.string="Highest Score: "+this._highestScore),this._gameType===s.GAME_TYPE.TOUR&&this._score>=s.STAR_CATCHER_GAME_GOAL&&!this.completeBtn.node.active&&(this.completeBtn.node.active=!0,this._instructNextLevel()),this.scoreDisplay.string="Score: "+this._score,this._timer=0;var e=this._spawnScoreFX(t);this.node.addChild(e.node),e.play(),this._playScoreAudio()},e.prototype._playScoreAudio=function(){cc.audioEngine.play(this.scoreAudio,!1,1)},e.prototype._resetScore=function(){this._score=0,this.scoreDisplay.string="Score: 0"},e.prototype.getPlayerPosition=function(){return this.player.node.position},e.prototype._gameOver=function(){this._isPlaying=!1,this._settleScore(),this.recordDisplay.active=!0,this._resetScore(),this._resetScene(),this.pauseBtn.node.active=!1,this.startBtn.node.setPosition(cc.v2(0,0)),this.gameOverLabel.node.active=!0},e.prototype.onPauseClick=function(){this._isPlaying?this._pauseGame():this._resumeGame()},e.prototype._pauseGame=function(){this._isPlaying=!1,this.player.node.pauseAllActions(),this.player.pausePlayer(),this._changeBtnName("Resume")},e.prototype._changeBtnName=function(t){this.pauseBtn.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=t},e.prototype._resumeGame=function(){this._isPlaying=!0,this.player.resumePlayer(),this.player.node.resumeAllActions(),this._changeBtnName("Pause")},e.prototype._resetScene=function(){this._timer=0,this.player.node.setPosition(cc.v2(0,-150)),this._currentStar.node.destroy(),this.player.node.stopAllActions(),this.player.clearAllAction(),this.player.pausePlayer()},e.prototype._settleScore=function(){if(this._gameType!==s.GAME_TYPE.TOUR){var t=this._username in this._ranking?this._ranking[this._username]:0;this._highestScore>t&&(this._ranking[this._username]=this._highestScore,cc.sys.localStorage.setItem("ranking-star",JSON.stringify(this._ranking)),this.pbCompare.string="Personal Best: "+t+" -> "+this._highestScore)}},e.prototype.onClickCloseSettle=function(){this.recordDisplay.active=!1},e.prototype._instructNextLevel=function(){var t=this;this.instructionLabel.string="Congrats! You Got "+s.STAR_CATCHER_GAME_GOAL+" Stars!\nYou can enter next level via 'Complete' Button!",setTimeout(function(){t.instructionLabel.string="Congrats! You Got "+s.STAR_CATCHER_GAME_GOAL+" Stars!\n"},3e3,this)},e.prototype._disableAllBtns=function(){this.pauseBtn.node.active=!1,this.completeBtn.node.active=!1,this.startBtn.node.active=!1,this.quitBtn.node.active=!1},e.prototype.nextLevel=function(){var t=this;this._isPlaying=!1,this._disableAllBtns(),this._currentStar.node.destroy(),this.player.getComponent("Player").quitScene(function(){t.nextLevelDisplay.node.active=!0,setTimeout(function(){cc.director.loadScene("open-lecture",function(){cc.find("Canvas").getComponent(c.default).setStage(s.LECTURE_STAGE.AFTER_STAR)})},s.LOADING_TIME)})},e.prototype.update=function(t){if(this._isPlaying){if(this._timer>this._starDuration)return this._gameType===s.GAME_TYPE.TOUR&&this._score>=s.STAR_CATCHER_GAME_GOAL?void this.nextLevel():void this._gameOver();this._timer+=t,this.starTimer.progress=1-this._timer/this._starDuration}},r([h(cc.Node)],e.prototype,"ground",void 0),r([h(cc.Prefab)],e.prototype,"starPref",void 0),r([h(cc.Prefab)],e.prototype,"scorePref",void 0),r([h(a.default)],e.prototype,"player",void 0),r([h(cc.Label)],e.prototype,"scoreDisplay",void 0),r([h],e.prototype,"maxDuration",void 0),r([h],e.prototype,"minDuration",void 0),r([h(cc.AudioClip)],e.prototype,"scoreAudio",void 0),r([h(cc.Button)],e.prototype,"startBtn",void 0),r([h(cc.Button)],e.prototype,"completeBtn",void 0),r([h(cc.Button)],e.prototype,"pauseBtn",void 0),r([h(cc.Button)],e.prototype,"quitBtn",void 0),r([h(cc.Label)],e.prototype,"gameOverLabel",void 0),r([h(cc.Label)],e.prototype,"usernameLabel",void 0),r([h(cc.Label)],e.prototype,"highestScoreLabel",void 0),r([h(cc.Label)],e.prototype,"instructionLabel",void 0),r([h(cc.Label)],e.prototype,"nextLevelDisplay",void 0),r([h(cc.ProgressBar)],e.prototype,"starTimer",void 0),r([h(cc.Node)],e.prototype,"recordDisplay",void 0),r([h(cc.Label)],e.prototype,"pbCompare",void 0),r([u],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../constant/GameConstants":"GameConstants","../lectures/OpenLecture":"OpenLecture","./Player":"Player","./ScoreFX":"ScoreFX","./Star":"Star"}],Grimer:[function(t,e,o){"use strict";cc._RF.push(e,"cf0f90cbodDeLtEwSaqzxpo","Grimer");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jumpHeight=0,e.jumpDuration=0,e.squashDuration=0,e}return n(e,t),e.prototype.onLoad=function(){cc.tween(this.node).then(this._jumpForever()).start()},e.prototype._jumpForever=function(){var t=cc.tween().by(this.jumpDuration,{y:this.jumpHeight},{easing:"cubicOut"}),e=cc.tween().by(this.jumpDuration,{y:-this.jumpHeight},{easing:"cubicIn"}),o=cc.tween().to(this.squashDuration,{scaleY:.9},{easing:"cubicOut"}),i=cc.tween().to(this.squashDuration,{scaleY:1.1},{easing:"cubicIn"}),n=cc.tween().to(this.squashDuration,{scaleY:1},{easing:"linear"}),r=cc.tween().sequence(o,i,t,n,e);return cc.tween().repeatForever(r)},r([a],e.prototype,"jumpHeight",void 0),r([a],e.prototype,"jumpDuration",void 0),r([a],e.prototype,"squashDuration",void 0),r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],Home:[function(t,e,o){"use strict";cc._RF.push(e,"3cdcd4z68RPU7b9TO+puRU3","Home");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s,c=t("../constant/GameConstants"),a=t("../maze/Maze"),p=t("../star/Game"),u=t("./BatFlyFX"),h=t("./UserNamePopUp"),l=cc._decorator,_=l.ccclass,d=l.property;(function(t){t.NO_GAME="nil",t.GAME_STAR_CATCHER="star-catcher",t.GAME_ENDLESS_MAZE="endless-maze",t.GAME_TOUR="open-lecture"})(s||(s={}));var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.batFX=void 0,e.gamePopUp=void 0,e.gameInstruction=void 0,e.tourGameInstruction=void 0,e.userNamePopUp=void 0,e.leaderPopUp=void 0,e.starLeaderLabel=void 0,e.mazeLeaderLabel=void 0,e.helpPage=void 0,e.flyDuration=0,e.minBatSpwanDuration=0,e.maxBatSpawnDuration=0,e.minBatSpawn=0,e.maxBatSpawn=0,e.minBatY=0,e.maxBatY=0,e._batTimer=0,e._batPool=void 0,e._isPoping=!1,e._gameLoading=!1,e._game=s.NO_GAME,e}return n(e,t),e.prototype.onLoad=function(){this._batPool=new cc.NodePool("BatFlyFX"),this.userNamePopUp.getComponent(h.default).init(this),this.gamePopUp.zIndex=1,this.userNamePopUp.zIndex=2,this.leaderPopUp.zIndex=3,this.helpPage.zIndex=4,this._displayMazeRanking(),this._displaStarRanking()},e.prototype._displayMazeRanking=function(){if(cc.sys.localStorage.getItem("ranking-maze")){var t=JSON.parse(cc.sys.localStorage.getItem("ranking-maze")),e=Object.keys(t).sort(function(e,o){return t[o]-t[e]}),o="",i=1;e.forEach(function(e){o+=i+". "+e+" : "+t[e]+"\n",i+=1}),this.mazeLeaderLabel.string=o}else this.mazeLeaderLabel.string="- No Player Data -"},e.prototype._displaStarRanking=function(){if(cc.sys.localStorage.getItem("ranking-star")){var t=JSON.parse(cc.sys.localStorage.getItem("ranking-star")),e=Object.keys(t).sort(function(e,o){return t[o]-t[e]}),o="",i=1;e.forEach(function(e){o+=i+". "+e+" : "+t[e]+"\n",i+=1}),this.starLeaderLabel.string=o}else this.starLeaderLabel.string="- No Player Data -"},e.prototype.onClickStart=function(){this._isPoping||(this._isPoping=!0,this.gamePopUp.active=!0)},e.prototype.onClickLeader=function(){this._isPoping||(this._isPoping=!0,this.leaderPopUp.active=!0)},e.prototype.onClickLeaderClose=function(){this._isPoping=!1,this.leaderPopUp.active=!1},e.prototype.onClickGameClose=function(){this.gamePopUp.active=!1,this._isPoping=!1},e.prototype.cancelNameSet=function(){this.gamePopUp.active=!0,this.userNamePopUp.active=!1},e.prototype.loadGame=function(){var t=this;switch(this._gameLoading=!0,this.gameInstruction.string="Game Loading..",this._game){case s.GAME_TOUR:setTimeout(function(){cc.director.loadScene(t._game)},c.LOADING_TIME);break;case s.GAME_ENDLESS_MAZE:setTimeout(function(){cc.director.loadScene(t._game,function(){cc.find("Canvas").getChildByName("Maze").getComponent(a.default).setGameType(c.GAME_TYPE.NORMAL)})},c.LOADING_TIME);break;case s.GAME_STAR_CATCHER:setTimeout(function(){cc.director.loadScene(t._game,function(){cc.find("Canvas").getComponent(p.default).setGameType(c.GAME_TYPE.NORMAL)})},c.LOADING_TIME)}},e.prototype.onClickStarGame=function(){this._gameLoading||(this._game=s.GAME_STAR_CATCHER,this.gamePopUp.active=!1,this.userNamePopUp.active=!0)},e.prototype.onClickMazeGame=function(){this._gameLoading||(this._game=s.GAME_ENDLESS_MAZE,this.gamePopUp.active=!1,this.userNamePopUp.active=!0)},e.prototype.onClickTourGame=function(){this._gameLoading||(this._game=s.GAME_TOUR,this.tourGameInstruction.string="Game Loading..",this.loadGame())},e.prototype._spawnBat=function(t,e){var o=this,i=void 0;this._batPool.size()>0?i=this._batPool.get():(i=cc.instantiate(this.batFX)).getComponent(u.default).init(this),this.node.addChild(i),i.setPosition(cc.v2(this.node.width/2+e,t)),i.getComponent(u.default).play(),cc.tween(i).then(this._getBatFlyAction(e)).call(function(){o.reuseBatFX(i)}).start()},e.prototype.reuseBatFX=function(t){this._batPool.put(t)},e.prototype._getBatFlyAction=function(t){return cc.tween().by(this.flyDuration,{x:-this.node.width-t},{easing:"linear"})},e.prototype.onClickHelpOpen=function(){this._isPoping||(this.helpPage.active=!0,this._isPoping=!0)},e.prototype.onClickHelpClose=function(){this.helpPage.active=!1,this._isPoping=!1},e.prototype.update=function(t){if(this._batTimer-=t,this._batTimer<=0){this._batTimer=Math.random()*(this.maxBatSpawnDuration-this.minBatSpwanDuration)+this.minBatSpwanDuration;for(var e=Math.floor(Math.random()*(this.maxBatSpawn-this.minBatSpawn))+this.minBatSpawn,o=0;o<e;o++){var i=Math.random()*(this.maxBatY-this.minBatY)+this.minBatY;this._spawnBat(i,60*o)}}},r([d(cc.Prefab)],e.prototype,"batFX",void 0),r([d(cc.Node)],e.prototype,"gamePopUp",void 0),r([d(cc.Label)],e.prototype,"gameInstruction",void 0),r([d(cc.Label)],e.prototype,"tourGameInstruction",void 0),r([d(cc.Node)],e.prototype,"userNamePopUp",void 0),r([d(cc.Node)],e.prototype,"leaderPopUp",void 0),r([d(cc.Label)],e.prototype,"starLeaderLabel",void 0),r([d(cc.Label)],e.prototype,"mazeLeaderLabel",void 0),r([d(cc.Node)],e.prototype,"helpPage",void 0),r([d],e.prototype,"flyDuration",void 0),r([d],e.prototype,"minBatSpwanDuration",void 0),r([d],e.prototype,"maxBatSpawnDuration",void 0),r([d],e.prototype,"minBatSpawn",void 0),r([d],e.prototype,"maxBatSpawn",void 0),r([d],e.prototype,"minBatY",void 0),r([d],e.prototype,"maxBatY",void 0),r([_],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../constant/GameConstants":"GameConstants","../maze/Maze":"Maze","../star/Game":"Game","./BatFlyFX":"BatFlyFX","./UserNamePopUp":"UserNamePopUp"}],MazeBuilder:[function(t,e,o){"use strict";cc._RF.push(e,"01ed5KaXq9GBLGKKJjUjoE5","MazeBuilder"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("../constant/GameConstants"),n=t("./Queue"),r=[[0,1],[0,-1],[1,0],[-1,0]];function s(){for(var t=new Array(i.MAZE_M),e=0;e<i.MAZE_M;e++)t[e]=new Array(i.MAZE_N).fill(i.TILE_TYPE.TILE_WALL);return t}function c(t,e){return t>0&&t<i.MAZE_M&&e>0&&e<i.MAZE_N}var a=function(){function t(){this._visited=void 0,this._visited=new Array(i.MAZE_M);for(var t=0;t<i.MAZE_M;t++)this._visited[t]=new Array(i.MAZE_N).fill(!1)}return t.prototype._clearMaze=function(t){for(var e=0;e<i.MAZE_M;e++)for(var o=0;o<i.MAZE_N;o++)t[e][o]=i.TILE_TYPE.TILE_WALL,this._visited[e][o]=!1},t.prototype.buildMaze=function(){var t=s();return this._generalizePath(t,!1),t},t.prototype._generalizePath=function(t,e){var o=new n.default;e&&this._clearMaze(t),o.enqueue({x:1,y:1}),t[1][1]=i.TILE_TYPE.TILE_ROAD,this._visited[1][1]=!0;for(var s=void 0;!o.isEmpty();){var a=o.randomDequeue();s=a;for(var p=0;p<r.length;p++){var u=a.x+2*r[p][0],h=a.y+2*r[p][1];if(c(u,h)&&!this._visited[u][h]){o.enqueue({x:u,y:h}),this._visited[u][h]=!0,u<i.MAZE_M-1&&h<=i.MAZE_N-1?t[u][h]=i.TILE_TYPE.TILE_ROAD:console.log(a.x,a.y,r[p]);var l={x:a.x+r[p][0],y:a.y+r[p][1]};c(l.x,l.y)&&(this._visited[l.x][l.y]=!0,t[l.x][l.y]=i.TILE_TYPE.TILE_ROAD)}}}t[s.x][s.y]=i.TILE_TYPE.TILE_STAR},t.prototype.rebuildMaze=function(t){this._generalizePath(t,!0)},t}();o.default=a,cc._RF.pop()},{"../constant/GameConstants":"GameConstants","./Queue":"Queue"}],MazePlayer:[function(t,e,o){"use strict";cc._RF.push(e,"5f889g9B4FO2LTwWbi9u8cD","MazePlayer");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s,c=cc._decorator,a=c.ccclass,p=c.property,u=t("../constant/GameConstants");(function(t){t[t.UP=0]="UP",t[t.DOWN=1]="DOWN",t[t.LEFT=2]="LEFT",t[t.RIGHT=3]="RIGHT",t[t.STILL=4]="STILL"})(s||(s={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.grimerLeft=void 0,e.grimerRight=void 0,e.stepDuration=u.MAZE_MOVE_TIME,e._isMoving=!1,e._isPressing=!1,e._game=void 0,e}return n(e,t),e.prototype.onLoad=function(){this._setInputListener()},e.prototype.init=function(t){this._game=t},e.prototype.onCollisionEnter=function(t,e){var o=this;console.log("THERE IS A COLLISION : ("+t.node.x+", "+t.node.y+") ,  ("+e.node.x+", "+e.node.y+")"),setTimeout(function(){o._game.levelUp()},1e3*this.stepDuration)},e.prototype.onDestroy=function(){this._closeInputListener()},e.prototype._canMove=function(t,e){return!this._game.isWall(this.node.x/u.BRICK_WIDTH+t,this.node.y/-u.BRICK_HEIGHT+e)},e.prototype._setInputListener=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this._onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this._onKeyUp,this)},e.prototype._closeInputListener=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP)},e.prototype._onKeyDown=function(t){if(!this._isPressing&&!this._isMoving&&this._game.playerCanMove())switch(t.keyCode){case cc.macro.KEY.left:this._isPressing=!0,this._moveLeft();break;case cc.macro.KEY.right:this._isPressing=!0,this._moveRight();break;case cc.macro.KEY.up:this._isPressing=!0,this._moveUp();break;case cc.macro.KEY.down:this._isPressing=!0,this._moveDown()}},e.prototype._moveLeft=function(){this._canMove(-1,0)&&(this.turnLeft(),this._startMoving(s.LEFT))},e.prototype.turnRight=function(){this.node.getComponent(cc.Sprite).spriteFrame=this.grimerRight},e.prototype.turnLeft=function(){this.node.getComponent(cc.Sprite).spriteFrame=this.grimerLeft},e.prototype._moveRight=function(){this._canMove(1,0)&&(this.turnRight(),this._startMoving(s.RIGHT))},e.prototype._moveUp=function(){this._canMove(0,-1)&&this._startMoving(s.UP)},e.prototype._moveDown=function(){this._canMove(0,1)&&this._startMoving(s.DOWN)},e.prototype._onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.left:case cc.macro.KEY.right:case cc.macro.KEY.up:case cc.macro.KEY.down:this._isPressing=!1}},e.prototype._startMoving=function(t){var e,o=this;this._isMoving=!0;var i=null===(e=this._getMovement(t))||void 0===e?void 0:e.call(function(){o._isMoving=!1});cc.tween(this.node).then(i).start()},e.prototype._getMovement=function(t){switch(t){case s.DOWN:return cc.tween(this.node).by(this.stepDuration,{y:-u.MAZE_MOVE_STEP},{easing:"sineOut"});case s.UP:return cc.tween(this.node).by(this.stepDuration,{y:u.MAZE_MOVE_STEP},{easing:"sineOut"});case s.LEFT:return cc.tween(this.node).by(this.stepDuration,{x:-u.MAZE_MOVE_STEP},{easing:"sineOut"});case s.RIGHT:return cc.tween(this.node).by(this.stepDuration,{x:u.MAZE_MOVE_STEP},{easing:"sineOut"});default:return}},r([p(cc.SpriteFrame)],e.prototype,"grimerLeft",void 0),r([p(cc.SpriteFrame)],e.prototype,"grimerRight",void 0),r([p],e.prototype,"stepDuration",void 0),r([a],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../constant/GameConstants":"GameConstants"}],Maze:[function(t,e,o){"use strict";cc._RF.push(e,"bd32ekzqKhAPbF4DSfRHEoG","Maze");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.property,p=t("../helper/MazeBuilder"),u=t("../constant/GameConstants"),h=t("./MazePlayer"),l=t("../lectures/OpenLecture"),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.brick=void 0,e.player=void 0,e.star=void 0,e.timeDisplay=void 0,e.currentUser=void 0,e.progressBar=void 0,e.levelLabel=void 0,e.gameOverLabel=void 0,e.startBtn=void 0,e.pauseBtn=void 0,e.completeBtn=void 0,e.nextLevelLabel=void 0,e.highestScoreLabel=void 0,e.recordDisplay=void 0,e.pbCompare=void 0,e._startX=0,e._startY=0,e._mazeArray=void 0,e._timer=0,e._isPaused=!0,e._level=0,e._builder=void 0,e._brickPool=void 0,e._username="",e._ranking=void 0,e._highestScore=0,e._gameType=u.GAME_TYPE.TOUR,e}return n(e,t),e.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0,this._brickPool=new cc.NodePool,this._builder=new p.default,this._mazeArray=this._builder.buildMaze(),this._displayMaze(),this._startX=u.BRICK_WIDTH,this._startY=-u.BRICK_HEIGHT,this._configCurrentUserName(),this._configLeaderBoard(),this._timer=0,this.timeDisplay.string="Time: "+u.MAZE_MAX_TIME+"s",this.progressBar.progress=1,this._initPlayer()},e.prototype.start=function(){this._gameType===u.GAME_TYPE.TOUR?this.highestScoreLabel.node.active=!1:this._getHighestScore()},e.prototype._configCurrentUserName=function(){cc.sys.localStorage.getItem("currentPlayer")?this._username=cc.sys.localStorage.getItem("currentPlayer"):this._username="player12138",this.currentUser.string="Current Player:\n"+this._username},e.prototype._configLeaderBoard=function(){cc.sys.localStorage.getItem("ranking-maze")?this._ranking=JSON.parse(cc.sys.localStorage.getItem("ranking-maze")):(this._ranking={},cc.sys.localStorage.setItem("ranking-maze",JSON.stringify(this._ranking)))},e.prototype._getHighestScore=function(){this._username in this._ranking&&(this._highestScore=this._ranking[this._username],this.highestScoreLabel.string="Highest Score:\n"+this._highestScore)},e.prototype.setGameType=function(t){this._gameType=t},e.prototype._initPlayer=function(){this.player.node.setPosition(cc.v2(this._startX,this._startY)),this.player.getComponent(h.default).init(this)},e.prototype.quitPlaying=function(){this._settleScore(),cc.director.loadScene("main")},e.prototype._resetLevel=function(){this._level=0,this.levelLabel.string="Level: "+this._level},e.prototype.startPlaying=function(){this.gameOverLabel.node.active&&(this.gameOverLabel.node.active=!1,this._resetLevel(),this._rebuildMaze(),this._displayMaze()),this.player.node.setPosition(cc.v2(this._startX,this._startY)),this._timer=0,this.timeDisplay.string="Time: "+u.MAZE_MAX_TIME+"s",this.progressBar.progress=1,this.startBtn.node.active=!1,this._isPaused=!1,this.pauseBtn.node.active=!0},e.prototype.onPauseClick=function(){this._isPaused?this._resumeGame():this._pauseGame()},e.prototype._pauseGame=function(){this._isPaused=!0,this._changeBtnName("Resume")},e.prototype._changeBtnName=function(t){this.pauseBtn.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=t},e.prototype._resumeGame=function(){this._isPaused=!1,this._changeBtnName("Pause")},e.prototype._displayMaze=function(){for(var t=0;t<u.MAZE_M;t++)for(var e=0;e<u.MAZE_N;e++)switch(this._mazeArray[t][e]){case u.TILE_TYPE.TILE_WALL:this._forgeBrick(e*u.BRICK_WIDTH,-t*u.BRICK_HEIGHT);break;case u.TILE_TYPE.TILE_STAR:this.star.node.setPosition(e*u.BRICK_WIDTH,-t*u.BRICK_HEIGHT)}},e.prototype._forgeBrick=function(t,e){var o=void 0;this._brickPool.size()>0?o=this._brickPool.get():((o=cc.instantiate(this.brick)).width=u.BRICK_WIDTH,o.height=u.BRICK_HEIGHT),this.node.addChild(o),o.x=t,o.y=e},e.prototype._reuseBrick=function(t){this._brickPool.put(t)},e.prototype._recycleAllBricks=function(){for(var t=this.node.children,e=t.length-1;e>=0;e--)"Brick"===t[e].name&&this._reuseBrick(t[e])},e.prototype.playerCanMove=function(){return!this._isPaused},e.prototype.isWall=function(t,e){return this._mazeArray[e][t]===u.TILE_TYPE.TILE_WALL},e.prototype._rebuildMaze=function(){this._recycleAllBricks(),this._builder.rebuildMaze(this._mazeArray)},e.prototype._settleScore=function(){if(this._gameType!==u.GAME_TYPE.TOUR){var t=this._username in this._ranking?this._ranking[this._username]:0;this._highestScore>t&&(this._ranking[this._username]=this._highestScore,cc.sys.localStorage.setItem("ranking-maze",JSON.stringify(this._ranking)),this.pbCompare.string="Personal Best: "+t+" -> "+this._highestScore)}},e.prototype.onClickCloseRecord=function(){this.recordDisplay.active=!1},e.prototype.levelUp=function(){var t=this;this._timer=0,this._level+=1,this.levelLabel.string="Level: "+this._level,this._level>this._highestScore&&(this._highestScore=this._level,this.highestScoreLabel.string="Highest Score:\n"+this._highestScore),this._rebuildMaze(),this._displayMaze(),this.player.node.setPosition(cc.v2(this._startX,this._startY)),this.player.getComponent(h.default).turnRight(),this._gameType===u.GAME_TYPE.TOUR&&this._level>=u.MAZE_GAME_GOAL&&!this.completeBtn.node.active&&(this.completeBtn.node.active=!0,this.nextLevelLabel.node.active=!0,setTimeout(function(){t.nextLevelLabel.node.active=!1},u.LOADING_TIME))},e.prototype._gameOver=function(){this._isPaused=!0,this._gameType===u.GAME_TYPE.TOUR&&this._level>=u.MAZE_GAME_GOAL?this.completeTour():(this._gameType===u.GAME_TYPE.NORMAL&&(this._settleScore(),this.recordDisplay.active=!0),this.gameOverLabel.node.active=!0,this.startBtn.node.active=!0)},e.prototype.completeTour=function(){this.nextLevelLabel.node.active=!0,this.nextLevelLabel.string="Next Level!\nLoading...",setTimeout(function(){cc.director.loadScene("open-lecture",function(){cc.find("Canvas").getComponent(l.default).setStage(u.LECTURE_STAGE.AFTER_MAZE)})},u.LOADING_TIME)},e.prototype.update=function(t){this._isPaused||(this._timer+=t,this._timer>=u.MAZE_MAX_TIME?this._gameOver():(this.timeDisplay.string="Time: "+Math.floor(u.MAZE_MAX_TIME-this._timer)+"s",this.progressBar.progress=Math.floor(u.MAZE_MAX_TIME-this._timer)/u.MAZE_MAX_TIME))},r([a(cc.Prefab)],e.prototype,"brick",void 0),r([a(cc.Sprite)],e.prototype,"player",void 0),r([a(cc.Collider)],e.prototype,"star",void 0),r([a(cc.Label)],e.prototype,"timeDisplay",void 0),r([a(cc.Label)],e.prototype,"currentUser",void 0),r([a(cc.ProgressBar)],e.prototype,"progressBar",void 0),r([a(cc.Label)],e.prototype,"levelLabel",void 0),r([a(cc.Label)],e.prototype,"gameOverLabel",void 0),r([a(cc.Button)],e.prototype,"startBtn",void 0),r([a(cc.Button)],e.prototype,"pauseBtn",void 0),r([a(cc.Button)],e.prototype,"completeBtn",void 0),r([a(cc.Label)],e.prototype,"nextLevelLabel",void 0),r([a(cc.Label)],e.prototype,"highestScoreLabel",void 0),r([a(cc.Node)],e.prototype,"recordDisplay",void 0),r([a(cc.Label)],e.prototype,"pbCompare",void 0),r([c],e)}(cc.Component);o.default=_,cc._RF.pop()},{"../constant/GameConstants":"GameConstants","../helper/MazeBuilder":"MazeBuilder","../lectures/OpenLecture":"OpenLecture","./MazePlayer":"MazePlayer"}],NamePopUp:[function(t,e,o){"use strict";cc._RF.push(e,"e7cbdrR7GxFNYiMLK+wEkxG","NamePopUp");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nameInput=void 0,e._lecture=void 0,e}return n(e,t),e.prototype.init=function(t){this._lecture=t},e.prototype.setName=function(){var t=this.nameInput.string;null===t||0===t.length||this._lecture.setName(t)},r([a(cc.EditBox)],e.prototype,"nameInput",void 0),r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],OpenLecture:[function(t,e,o){"use strict";cc._RF.push(e,"6af17p3WNNEZbBh3bHTBPW9","OpenLecture");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../constant/GameConstants"),c=t("./NamePopUp"),a=cc._decorator,p=a.ccclass,u=a.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._dialogueCnt=0,e._username="user12138",e._isPressing=!1,e._blockDialog=!1,e._stage=s.LECTURE_STAGE.OPEN,e._dialogueFinish=s.LECTURE_STAGE.AFTER_STAR-1,e.dialogueContent=void 0,e.namePopUp=void 0,e.previewImg=void 0,e.previewMaze=void 0,e.previewHome=void 0,e}return n(e,t),e.prototype.onLoad=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this._onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this._onKeyUp,this),this.namePopUp.init(this),cc.sys.localStorage.getItem("currentPlayer")?this._username=cc.sys.localStorage.getItem("currentPlayer"):this._username="player12138"},e.prototype.start=function(){this._dialogueCnt=s.LECTURE_START[this._stage],this._dialogueFinish=s.LECTURE_FINISH[this._stage]},e.prototype._onKeyDown=function(t){this._isPressing||t.keyCode===cc.macro.KEY.space&&(this._isPressing=!0,this._continueDialogue())},e.prototype._onKeyUp=function(t){t.keyCode===cc.macro.KEY.space&&(this._isPressing=!1)},e.prototype.setStage=function(t){this._stage=t},e.prototype._nextScene=function(){switch(console.log("No More Dialogue, Start Playing Game!"),this._stage){case s.LECTURE_STAGE.OPEN:this._startGameAfterPreview();break;case s.LECTURE_STAGE.AFTER_STAR:this._startMazeAfterPreview();break;case s.LECTURE_STAGE.AFTER_MAZE:this._finishTour()}},e.prototype._continueDialogue=function(){if(!this._blockDialog)if(this._dialogueCnt>=this._dialogueFinish)this._nextScene();else{if(this._dialogueCnt===s.OPEN_DIALOG_USERNAME_INPUT&&!this.namePopUp.node.active)return this.namePopUp.node.active=!0,void(this._blockDialog=!0);this._dialogueCnt+=1;var t=s.DIALOGUES[this._dialogueCnt];t.includes("{}")&&(t=t.replace("{}",this._username)),this.dialogueContent.string=t}},e.prototype.setName=function(t){this._username=t,cc.sys.localStorage.setItem("currentPlayer",this._username),this._blockDialog=!1,this._continueDialogue(),this.namePopUp.node.active=!1},e.prototype._startGameAfterPreview=function(){this.previewImg.active=!0,setTimeout(function(){cc.director.loadScene("star-catcher",function(){console.log("Switched to scene: STAR-CATCHER")})},1e3)},e.prototype._startMazeAfterPreview=function(){this.previewMaze.active=!0,setTimeout(function(){cc.director.loadScene("endless-maze",function(){console.log("Switched to scene: ENDLESS-MAZE")})},1e3)},e.prototype._finishTour=function(){this.previewHome.active=!0,setTimeout(function(){cc.director.loadScene("main",function(){console.log("Switched back to Main")})},1e3)},r([u(cc.Label)],e.prototype,"dialogueContent",void 0),r([u(c.default)],e.prototype,"namePopUp",void 0),r([u(cc.Node)],e.prototype,"previewImg",void 0),r([u(cc.Node)],e.prototype,"previewMaze",void 0),r([u(cc.Node)],e.prototype,"previewHome",void 0),r([p],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../constant/GameConstants":"GameConstants","./NamePopUp":"NamePopUp"}],Player:[function(t,e,o){"use strict";cc._RF.push(e,"e1f4bOQkHNESoee3suWJTkP","Player");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jumpHeight=0,e.accel=0,e.jumpDuration=0,e.maxSpeed=0,e.friction=0,e.squashDuration=0,e.jumpAudio=void 0,e.leftSpriteFrame=void 0,e.rightSpriteFrame=void 0,e._xSpeed=0,e._accLeft=!1,e._accRight=!1,e._braking=!0,e._maxXLeft=0,e._maxXRight=0,e._isPaused=!0,e}return n(e,t),e.prototype.onLoad=function(){this._maxXLeft=-this.node.parent.width/2,this._maxXRight=this.node.parent.width/2,this._setInputListener()},e.prototype.onDestroy=function(){this._closeInputListener()},e.prototype._setInputListener=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this._onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this._onKeyUp,this)},e.prototype._closeInputListener=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP)},e.prototype.init=function(){this._isPaused=!1,cc.tween(this.node).then(this._jumpForever()).start()},e.prototype.pausePlayer=function(){this._isPaused=!0},e.prototype.resumePlayer=function(){this._isPaused=!1},e.prototype._jumpForever=function(){var t=cc.tween().by(this.jumpDuration,{y:this.jumpHeight},{easing:"cubicOut"}),e=cc.tween().by(this.jumpDuration,{y:-this.jumpHeight},{easing:"cubicIn"}),o=cc.tween().to(this.squashDuration,{scaleY:.8},{easing:"cubicOut"}),i=cc.tween().to(this.squashDuration,{scaleY:1.2},{easing:"cubicIn"}),n=cc.tween().to(this.squashDuration,{scaleY:1},{easing:"linear"}),r=cc.tween().sequence(o,i,t,n,e).call(this._playJumpAudio.bind(this));return cc.tween().repeatForever(r)},e.prototype._playJumpAudio=function(){cc.audioEngine.playEffect(this.jumpAudio,!1)},e.prototype._onKeyDown=function(t){if(!this._isPaused)switch(t.keyCode){case cc.macro.KEY.a:this._accLeft=!0,this._braking=!1;break;case cc.macro.KEY.d:this._accRight=!0,this._braking=!1;break;case cc.macro.KEY.s:this._braking=!0}},e.prototype.clearAllAction=function(){this._xSpeed=0,this._accLeft=!1,this._accRight=!1},e.prototype._onKeyUp=function(t){if(!this._isPaused)switch(t.keyCode){case cc.macro.KEY.a:this._accLeft=!1,this._braking=!0;break;case cc.macro.KEY.d:this._accRight=!1,this._braking=!0}},e.prototype._turnLeft=function(){this.node.getComponent(cc.Sprite).spriteFrame=this.leftSpriteFrame},e.prototype._turnRight=function(){this.node.getComponent(cc.Sprite).spriteFrame=this.rightSpriteFrame},e.prototype.quitScene=function(t){this.node.stopAllActions(),this.pausePlayer(),this._turnRight();var e=cc.tween(this.node).to(this.jumpDuration,{y:-150},{easing:"cubicIn"}),o=cc.tween(this.node).to(this.squashDuration,{scaleY:1},{easing:"linear"}),i=cc.tween().to(2,{x:100+this.node.parent.width/2},{easing:"linear"});cc.tween(this.node).sequence(e,o,i).call(t).start()},e.prototype._handleBraking=function(t){if(0!==this._xSpeed){var e=-this._xSpeed/Math.abs(this._xSpeed)*this.friction*t;(this._xSpeed+e)*this._xSpeed<0?this._xSpeed=0:this._xSpeed+=e}},e.prototype._handleAccelrating=function(t){this._accLeft?(this.accel*t-this._xSpeed>0&&this._turnLeft(),this._xSpeed-=this.accel*t):this._accRight&&(this.accel*t+this._xSpeed>0&&this._turnRight(),this._xSpeed+=this.accel*t)},e.prototype.update=function(t){this._isPaused||(this._braking?this._handleBraking(t):this._handleAccelrating(t),Math.abs(this._xSpeed)>this.maxSpeed&&(this._xSpeed=this._xSpeed/Math.abs(this._xSpeed)*this.maxSpeed),this.node.x+=this._xSpeed*t,this.node.x>this._maxXRight&&(this.node.x=this._maxXRight,this._xSpeed=0),this.node.x<this._maxXLeft&&(this.node.x=this._maxXLeft,this._xSpeed=0))},r([a],e.prototype,"jumpHeight",void 0),r([a],e.prototype,"accel",void 0),r([a],e.prototype,"jumpDuration",void 0),r([a],e.prototype,"maxSpeed",void 0),r([a],e.prototype,"friction",void 0),r([a],e.prototype,"squashDuration",void 0),r([a(cc.AudioClip)],e.prototype,"jumpAudio",void 0),r([a(cc.SpriteFrame)],e.prototype,"leftSpriteFrame",void 0),r([a(cc.SpriteFrame)],e.prototype,"rightSpriteFrame",void 0),r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],Point:[function(t,e,o){"use strict";cc._RF.push(e,"cfa16a9wU1Jo6MkN+Qq5n9r","Point"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Queue:[function(t,e,o){"use strict";cc._RF.push(e,"c3962M4R0dLo6PBKFouVUPW","Queue"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(){this._nodes=[]}return t.prototype.enqueue=function(t){this._nodes.push(t)},t.prototype.dequeue=function(){return this._nodes.shift()},t.prototype.front=function(){return this._nodes[0]},t.prototype.isEmpty=function(){return 0===this._nodes.length},t.prototype.size=function(){return this._nodes.length},t.prototype.randomDequeue=function(){if(0!==this._nodes.length){var t=Math.floor(Math.random()*this._nodes.length),e=this._nodes[t];return this._nodes[t]=this._nodes[0],this._nodes.shift(),e}},t}();o.default=i,cc._RF.pop()},{}],ScoreAnim:[function(t,e,o){"use strict";cc._RF.push(e,"8f8a7PguVlBbIjBYbEIBl/D","ScoreAnim");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator.ccclass,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._scoreFX=void 0,e}return n(e,t),e.prototype.init=function(t){this._scoreFX=t},e.prototype.hideFX=function(){this._scoreFX.despawn()},r([s],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],ScoreFX:[function(t,e,o){"use strict";cc._RF.push(e,"3803a0rwThFVaGUbd5A12vY","ScoreFX");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scoreAnim=void 0,e._game=void 0,e}return n(e,t),e.prototype.init=function(t){this._game=t,this.scoreAnim.getComponent("ScoreAnim").init(this)},e.prototype.play=function(){this.scoreAnim.play("score_pop")},e.prototype.despawn=function(){this._game.desapwnScoreFX(this.node)},r([a(cc.Animation)],e.prototype,"scoreAnim",void 0),r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],Star:[function(t,e,o){"use strict";cc._RF.push(e,"97138/WUaVG+Zw9OgzhBdts","Star");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pickRadius=0,e._game=void 0,e._minOpacity=50,e}return n(e,t),e.prototype.init=function(t){this._game=t},e.prototype._getPlayerDistance=function(){return this.node.position.sub(this._game.getPlayerPosition()).mag()},e.prototype.onPick=function(){this._game.gainScore(cc.v2(this.node.x,this.node.y)),this._game.despawnStar(this.node),this._game.spawnNewStar()},e.prototype.update=function(){this._getPlayerDistance()<this.pickRadius?this.onPick():this.node.opacity=this._minOpacity+(255-this._minOpacity)*(1-this._game.getStarProgress())},r([a],e.prototype,"pickRadius",void 0),r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],UserNamePopUp:[function(t,e,o){"use strict";cc._RF.push(e,"07b9aCSR0hE9Yjb6JneH5xt","UserNamePopUp");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nameInput=void 0,e._game=void 0,e}return n(e,t),e.prototype.init=function(t){this._game=t},e.prototype.setName=function(){var t=this.nameInput.string;null===t||0===t.length||(cc.sys.localStorage.setItem("currentPlayer",t),this._game.loadGame())},r([a(cc.EditBox)],e.prototype,"nameInput",void 0),r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{}]},{},["GameConstants","BackgroundScroller","MazeBuilder","Point","Queue","BatFlyAnim","BatFlyFX","Grimer","Home","UserNamePopUp","NamePopUp","OpenLecture","Brick","Maze","MazePlayer","Game","Player","ScoreAnim","ScoreFX","Star"]);